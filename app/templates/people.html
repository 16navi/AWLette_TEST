{% extends 'classroom_layout.html' %}
{% block classroom %}

<script>
    const nav = document.getElementById('people');
    nav.removeAttribute('href');

    nav.style.borderBottom = '2px solid #704d4a';

    function searchFor(searchbar, students) {
        searchbar.addEventListener('keyup', function() {
            students.forEach(function(students) {
                if (students.id.toLowerCase().includes(searchbar.value) == true) {
                    students.style.display = '';
                } else if (students.id.toLowerCase().includes(searchbar.value) == false) {
                    students.style.display = 'none';
                };
            });
        });
    };
</script>
<div class='people-teacher'>
    <p>Teacher: {{ teacher }}</p>
</div>

{% if current_user.is_teacher == 1 %}
<h4>Student Progress</h4>
<input id='search' form='none' type='text' placeholder='Search for a student.'><br><br>
{% endif %}

<div class='people-students'>
<p>Students:</p>
    {% for student in classroom.student %}
        <p class='students' id='{{ student }}'>
            {% if current_user.is_teacher == 1 %}
            <a href='{{ url_for('student_progress', classroom_id=classroom.id ,users_id=student.id ) }}'>
                {{ student }}
            </a>
            {% else %}
            {{ student }}
            {% endif %}
        </p>
    {% endfor %}
</div>

{% if current_user.is_teacher == 1 %}
<script>
    searchFor(document.getElementById('search'),
              document.querySelectorAll('.students'))
</script>
{% endif %}

{% endblock %}