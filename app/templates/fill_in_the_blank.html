{% include 'nav.html' %}

<!-- Styling for table -->
<style>
    table, th, td {
      border:1px solid black;
      height: 25px;
    }

    table {
        display: inline-table;
    }
</style>

<!-- While there is no value for 'sublist' -->
{% if not sublist %}

Choose a sublist:
<form action='{{url_for('fill_in_the_blank')}}' method='GET'>
    <ul>
        <li><button name='sublist' type='submit' id='sublist_button' value='1'>Sublist 1</button></li>
    </ul>
</form>

{% endif %}

<!-- When 'sublist' has value -->
{% if sublist %}

<p>You picked Sublist No.{{ sublist }}</p>

<!-- List the forms in a seperate table as choices for 
 filling in the blanks in the sentence -->
<table>
    <tr>
        <th>Choices</th>
    </tr>
    {% for form in random_forms|shuffle %}
    <tr>
        <td>{{ form }}</td>
    </tr>
    {% endfor %}
</table>

<!-- Lists the sentences with input fields in between -->
<table>
    <tr>
        <th>Sentences</th>
    </tr>
    {% for form in random_forms %}
    <tr>    
         <td>
            <!-- I used Jinja to basically replace the 'form' inside the sentence
            with a text input field -->

            <!-- Set empty lists for the two sentence blocks -->
            {% set sentence_blanked1 = [] %}
            {% set sentence_blanked2 = [] %}          

                <!-- For loop to add each word of the sentence to their respective blocks -->
                {% for word in (form.sentence|lower).split() %}

                    <!-- if word is not the same as form and the last item in sentence_blanked1
                     is not False, do the following -->
                    {% if word|lower != form.form|lower and sentence_blanked1[-1] != False %}
                        {{ sentence_blanked1.append(word) or "" }}

                    <!-- Else, if word is the same as form -->
                    {% elif word|lower == form|lower %}
                        {{ sentence_blanked1.append(False) or "" }}
                    {% endif %}

                    <!-- If word is not the same as form and the last item in sentence_blanked1
                     is False, do the following -->
                    {% if word|lower != form.form|lower and sentence_blanked1[-1] == False %}
                        {{ sentence_blanked2.append(word) or "" }}
                    {% endif %}
                {% endfor %}

                <!-- Remove the False item in the list -->
                {{ sentence_blanked1.pop(-1) or "" }}

                {{ sentence_blanked1|join(' ')|capitalize }} <input type='text'></input> {{ sentence_blanked2|join(' ') }} 
         </td>
    </tr>
    {% endfor %}
</table>

{% endif %}
