{% include 'nav.html' %}

<!-- Styling for table -->
<style>
    table, th, td {
      border:1px solid black;
      padding: 5px;
      height: 30px;
      text-align: center;

    }

    table {
        display: inline-table;
    }

    input[type='text'] {
        text-align: center;
        background-color: None;
    }
</style>

<!-- Scripting -->
<script>
    // Function for checking if the answer is right or wrong
    function rightOrWrong(input, answer) {
        
        // adds an event listener that listens for a 'keyup' event
        // ('keyup' is when a key pressed is released)
        input.addEventListener('keyup', function(event) {

            // if the key is 'Enter'...
            if (event.key === 'Enter') {

                // ...do the following:
                // if the lowercase value of 'input' is equal to the 
                // lowercase inner HTML of 'answer'...
                if (input.value.toLowerCase() == answer.value.toLowerCase()) {

                    // logs in console
                    console.log('You got it!');

                    // sets the 'readonly' attribute of 'input' to true
                    input.setAttribute('readonly', 'true');

                    // not sure if I will use this just yet
                    // input.setAttribute('data-correct', 'true');

                    // makes the bg color of 'input' green
                    input.style.backgroundColor = '#90ee90';
                }

                // else, if they are not equal...
                else if (input.value.toLowerCase() != answer.value.toLowerCase()) {

                    // ...logs in console
                    console.log('Wrong answer!');

                    // makes bg color of 'input' red
                    input.style.backgroundColor = '#ff7f7f';
                }
            }
        })
    };
</script>

<!-- While there is no value for 'sublist' -->
{% if not sublist %}

Choose a sublist:
<form action='{{url_for('form')}}' method='GET'>
    <ul>
        <li><button name='sublist' type='submit' id='sublist_button' value='1'>Sublist 1</button></li>
    </ul>
</form>

{% endif %}

<!-- When 'sublist' has value -->
{% if sublist %}

<p>You picked Sublist No.{{ sublist }}</p>

<table>
    <tr>
        <th>Noun</th>
        <th>Adjective</th>
        <th>Verb</th>
    </tr>
{% for form_sublist in random_forms_main %}
    <tr>
        {% set blanks = random_blank_main[loop.index - 1]|shuffle %}
        <td>
            {% if blanks [0] == 0 %}
                <input type='text' id='a{{ loop.index }}1'></input>
                <input type='hidden' id='b{{ random_forms_main.index(form_sublist) }}1' value='{{ form_sublist[0] }}'></input>

                <script>
                    rightOrWrong(   document.getElementById('a{{ loop.index }}1'),
                                    document.getElementById('b{{ random_forms_main.index(form_sublist) }}1'));
                </script>
            {% else %}
                {{ form_sublist[0]|lower }}
            {% endif %}
        </td>
        <td>
            {% if blanks [1] == 0 %}
                <input type='text' id='a{{ loop.index }}2'></input>
                <input type='hidden' id='b{{ random_forms_main.index(form_sublist) }}2' value='{{ form_sublist[1] }}'></input>

                <script>
                    rightOrWrong(   document.getElementById('a{{ loop.index }}2'),
                                    document.getElementById('b{{ random_forms_main.index(form_sublist) }}2'));
                </script>
            {% else %}
                {{ form_sublist[1]|lower }}
            {% endif %}
        </td>
        <td>
            {% if blanks [2] == 0 %}
                <input type='text' id='a{{ loop.index }}3'></input>
                <input type='hidden' id='b{{ random_forms_main.index(form_sublist) }}3' value='{{ form_sublist[2] }}'></input>

                <script>
                    rightOrWrong(   document.getElementById('a{{ loop.index }}3'),
                                    document.getElementById('b{{ random_forms_main.index(form_sublist) }}3'));
                </script>
            {% else %}
                {{ form_sublist[2]|lower }}
            {% endif %}
        </td>
    </tr>
{% endfor %}
</table>

{% endif %}